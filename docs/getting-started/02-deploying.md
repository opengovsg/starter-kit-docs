import VercelCreateProject from "./images/vercel/vercel-create-project.png"
import VercelCreateTeam from "./images/vercel/vercel-create-team.png"
import VercelConfigure from "./images/vercel/vercel-configure.png"
import VercelCreate from "./images/vercel/vercel-create.png"
import VercelIntegrationList from "./images/vercel/integration/vercel-integration-list.png"
import VercelIntegrationFind from "./images/vercel/integration/vercel-integration-find.png"
import VercelIntegrationNeon from "./images/vercel/integration/vercel-integration-neon.png"
import VercelIntegrationSelectAccount from "./images/vercel/integration/vercel-integration-select-account.png"
import VercelIntegrationSelectProject from "./images/vercel/integration/vercel-integration-select-project.png"
import VercelIntegrationAdd from "./images/vercel/integration/vercel-integration-add.png"
import VercelNeonSelectProject from "./images/vercel/integration/vercel-neon-select-project.png"
import VercelNeonSelectDatabase from "./images/vercel/integration/vercel-neon-select-database.png"
import VercelNeonConfirm from "./images/vercel/integration/vercel-neon-confirm.png"
import VercelNeonEnvironmentVariables from "./images/vercel/integration/vercel-neon-environment-variables.png"

# Deploying your application

Starter Kit uses [Vercel](https://vercel.com) as our deployment platform. Vercel provides hosting for web applications, and offers a range of tools to aid with maintaining your product, including integrations with GitHub.

Setting up Vercel for your product can be done via the deploy button below.

:::info
If you are not a public officer with access to Postman.gov.sg, use the "Without Postman API key" button.
:::

With Postman API key:
<a href="https://vercel.com/new/clone?repository-url=https%3A%2F%2Fgithub.com%2Fopengovsg%2Fstarter-kit%2Ftree%2Fmain&env=SESSION_SECRET,POSTMAN_API_KEY">
<img src="https://vercel.com/button" width={125} />
</a>

Without Postman API key:
<a href="https://vercel.com/new/clone?repository-url=https%3A%2F%2Fgithub.com%2Fopengovsg%2Fstarter-kit%2Ftree%2Fmain&env=SESSION_SECRET">
<img src="https://vercel.com/button" width={125} />
</a>

## Step 1: Creating your repository

Vercel will prompt you for a name to create a new GitHub repository. This will create a copy of the Starter Kit code base in your chosen location.

<img src={VercelCreateProject} width={500} />

Once you have chosen a name, click Create.

## Step 1.1: Creating your team (optional)

Vercel will prompt you to create a team if you are creating the new GitHub repository within an organization.

<img src={VercelCreateTeam} width={500} />

## Step 2: Configuring your project

Once your repository has been created, you will need to provide the required set of environment variables.

<img src={VercelConfigure} width={500} />

The environment variables required are:

| Name              | What It Is                                                                                                                                                                                        | Example                                               |
| ----------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ----------------------------------------------------- |
| `SESSION_SECRET`  | A sequence of random characters used to protect session identifiers, generated by running `npx uuid` from your terminal. This variable must be **at least 32 characters** long to pass validation | 66a21b98-fb17-4259-ac4f-e94d303ac894                  |
| `POSTMAN_API_KEY` | An API key to send email via Postman                                                                                                                                                              | asdfn_v1_6DBRljleevjsd9DHPThsKDVDSenssCwW9zfA8W2ddf/T |

## Step 3: Creating your project

Click on Deploy and your copy of Starter Kit will start to deploy.

:::info
This deployment will fail because we have not attached the database.
:::

<img src={VercelCreate} width={500} />

## Step 4: Integrating Neon with your project

Navigate to your project and click on settings. In the "Integrations" tab, click on "Browse Marketplace".

<img src={VercelIntegrationList} width={500} />

Search for "Neon" and select "Neon Postgres".

<img src={VercelIntegrationFind} width={500} />

On the next page, click on "Add Integration".

<img src={VercelIntegrationNeon} width={500} />

Select your account (or the newly created team) to add the integration to.

<img src={VercelIntegrationSelectAccount} width={500} />

You may choose to enable the integration for all your projects or select a specific project.

<img src={VercelIntegrationSelectProject} width={500} />

After being redirected to Neon, select your project to configure.

<img src={VercelNeonSelectProject} width={500} />

<br/>
<br/>

:::info
If you are not redirected to Neon, visit [https://vercel.com/integrations/neon/new](https://vercel.com/integrations/neon/new).
:::

In the next step, select the Neon database cluster created previously.

<img src={VercelNeonSelectDatabase} width={500} />

Confirm the connection by clicking on the "Connect" button.

<img src={VercelNeonConfirm} width={500} />

To confirm that the integration has been successfully added, check the environment variables under "Settings" within your Vercel project.

You should see the following environment variables: `PGHOST`, `PGDATABASE`, `PGUSER`, `PGPASSWORD`, and `DATABASE_URL`.

<img src={VercelNeonEnvironmentVariables} width={500} />

## Step 5: Deploying your project

Now that you've successfully integrated Neon to your Vercel project, trigger a redeployment of your build.
